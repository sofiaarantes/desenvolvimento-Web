<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Estoque</title>
</head>
<body>

<div class="container">
    <h2>Controle de Estoque</h2>
    <div>
        <label for="produto">Produto:</label>
        <input type="text" id="produto" class="input-field" placeholder="Código Produto">
        
        <label for="quantidade">Quantidade:</label>
        <input type="number" id="quantidade" class="input-field" placeholder="Quantidade" min="1" value="1">
        
        <label for="preco">Preço (R$):</label>
        <input type="number" id="preco" class="input-field" placeholder="Preço" min="0.01" step="0.01">
        
        <button onclick="adicionarItem()">Inserir</button>
    </div>

    <table id="tabela-produtos">
        <thead>
            <tr>
                <th>Produto</th>
                <th>Quantidade</th>
                <th>Preço (R$)</th>
                <th>Subtotal (R$)</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <div class="total">
        Total geral: R$ <span id="total-geral">0,00</span>
    </div>
</div>

<script>
    function adicionarItem() {
        const produto = document.getElementById('produto').value;
        const quantidade = parseFloat(document.getElementById('quantidade').value);
        const preco = parseFloat(document.getElementById('preco').value);
        
        // Verifica se os valores inseridos são válidos
        if (!produto || isNaN(quantidade) || isNaN(preco) || quantidade <= 0 || preco <= 0) {
            alert("Preencha todos os campos corretamente!");
            return;
        }

        const subtotal = quantidade * preco;
        const tabela = document.querySelector('#tabela-produtos tbody');
        const linha = document.createElement('tr');

        // Preenche a tabela no HTML
        linha.innerHTML = `
            <td>${produto}</td>
            <td>${quantidade}</td>
            <td>R$ ${preco.toFixed(2)}</td>
            <td>R$ ${subtotal.toFixed(2)}</td>
            <td><button class="remove-btn" onclick="removerItem(this)">Remover</button></td>
        `;

        tabela.appendChild(linha);
        atualizarTotal();

        // Limpar campos
        document.getElementById('produto').value = '';
        document.getElementById('quantidade').value = 1;
        document.getElementById('preco').value = '';
    }

    function removerItem(botao) {
        botao.closest('tr').remove();
        atualizarTotal();
    }

    function atualizarTotal() {
        let total = 0;
        const linhas = document.querySelectorAll('#tabela-produtos tbody tr');

        linhas.forEach(linha => {
            const subtotalTexto = linha.children[3].textContent.replace('R$', '').trim();
            total += parseFloat(subtotalTexto);
        });

        document.getElementById('total-geral').textContent = total.toFixed(2);
    }
</script>

</body>
</html>
